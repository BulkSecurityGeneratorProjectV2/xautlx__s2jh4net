+function(d){var b=function(f,e){this.$element=d(f);this.options=d.extend({},b.DEFAULTS,e);this.init()};b.NAME="ExtBarcodeScanButton";b.VERSION="1.0.0";b.DEFAULTS={};b.prototype.init=function(){var e=this.$element;var f=this.options;e.on("click",function(){if(window.wx&&Util.isWeiXin()){window.wx.scanQRCode({needResult:1,scanType:["qrCode"],success:function(j){var h=j.resultStr;var k=e.attr("data-target-name");if(k){var i=e.closest("form");var g=i.find("input[name='"+k+"']");g.val(h);i.submit()}}})}else{alert("当前浏览模式不支持应用扫码功能")}})};function c(f){var e=arguments;return this.each(function(){var i=d(this);var h=i.data("ExtBarcodeScanButton");var g=d.extend({},i.data(),typeof f=="object"&&f);if(!h){i.data("ExtBarcodeScanButton",(h=new b(this,g)))}if(typeof f=="string"){h[f].apply(h,d.makeArray(e).slice(1))}})}var a=d.fn.extBarcodeScanButton;d.fn.extBarcodeScanButton=c;d.fn.extBarcodeScanButton.Constructor=b;d.fn.extBarcodeScanButton.noConflict=function(){d.fn.extBarcodeScanButton=a;return this};Global.addComponent({name:"ExtBarcodeScanButton",plugin:c,runPoint:Global.Component_Run_Point.AfterAjaxPageShow,expr:'button[data-toggle="barcode"]'});window.scanBarcodeCallback=function(i,g){var f=d("#"+i);f.val(g);var h=jQuery.Event("keydown");h.keyCode=13;f.trigger(h);f.select()}}(jQuery);